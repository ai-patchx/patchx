# AOSP Patch Submission Service

name = "patchx-service"
main = "dist/worker/index.js"
compatibility_date = "2024-01-01"

[env.production]
kv_namespaces = [
  { binding = "AOSP_PATCH_KV", id = "production_kv_id" }
]

[env.staging]
kv_namespaces = [
  { binding = "AOSP_PATCH_KV", id = "staging_kv_id" }
]

[build]
command = "npm run build:worker"

# 环境变量配置
[env.production.vars]
GERRIT_BASE_URL = "https://android-review.googlesource.com"
MAX_FILE_SIZE = "10485760"
RATE_LIMIT_WINDOW = "900000"
RATE_LIMIT_MAX = "10"
TEST_USER_PASSWORD = "patchx"
SUPABASE_URL = "https://your-project.supabase.co"
SUPABASE_ANON_KEY = "your_supabase_anon_key"

# AI提供商配置 - OpenAI
OPENAI_BASE_URL = "https://api.openai.com/v1"
OPENAI_MODEL = "gpt-4"
OPENAI_MAX_TOKENS = "2000"
OPENAI_TEMPERATURE = "0.1"

# AI提供商配置 - Anthropic
ANTHROPIC_BASE_URL = "https://api.anthropic.com/v1"
ANTHROPIC_MODEL = "claude-3-sonnet-20240229"
ANTHROPIC_MAX_TOKENS = "2000"
ANTHROPIC_TEMPERATURE = "0.1"

# 自定义AI提供商配置
CUSTOM_AI_BASE_URL = ""
CUSTOM_AI_MODEL = "gpt-3.5-turbo"
CUSTOM_AI_MAX_TOKENS = "2000"
CUSTOM_AI_TEMPERATURE = "0.1"

[env.staging.vars]
GERRIT_BASE_URL = "https://android-review.googlesource.com"
MAX_FILE_SIZE = "10485760"
RATE_LIMIT_WINDOW = "900000"
RATE_LIMIT_MAX = "10"
TEST_USER_PASSWORD = "patchx"
SUPABASE_URL = "https://your-project.supabase.co"
SUPABASE_ANON_KEY = "your_supabase_anon_key"

# AI提供商配置 - OpenAI
OPENAI_BASE_URL = "https://api.openai.com/v1"
OPENAI_MODEL = "gpt-3.5-turbo"
OPENAI_MAX_TOKENS = "2000"
OPENAI_TEMPERATURE = "0.1"

# AI提供商配置 - Anthropic
ANTHROPIC_BASE_URL = "https://api.anthropic.com/v1"
ANTHROPIC_MODEL = "claude-3-haiku-20240307"
ANTHROPIC_MAX_TOKENS = "2000"
ANTHROPIC_TEMPERATURE = "0.1"

# 自定义AI提供商配置
CUSTOM_AI_BASE_URL = ""
CUSTOM_AI_MODEL = "gpt-3.5-turbo"
CUSTOM_AI_MAX_TOKENS = "2000"
CUSTOM_AI_TEMPERATURE = "0.1"