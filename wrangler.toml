# AOSP Patch Submission Service

name = "patchx-service"
main = "dist/worker/index.js"
compatibility_date = "2024-01-01"

# Default bindings (used when deploying without --env flag)
# This deploys to patchx-service
kv_namespaces = [
  { binding = "PATCHX_KV", id = "kv_id" }
]
d1_databases = [
  { binding = "PATCHX_D1", database_name = "patchx-db", database_id = "db_id" }
]

# Production environment
# This deploys to patchx-service-production)
[env.production]
kv_namespaces = [
  { binding = "PATCHX_KV", id = "production_kv_id" }
]
d1_databases = [
  { binding = "PATCHX_D1", database_name = "patchx-db", database_id = "production_db_id" }
]

[env.staging]
kv_namespaces = [
  { binding = "PATCHX_KV", id = "staging_kv_id" }
]
d1_databases = [
  { binding = "PATCHX_D1", database_name = "patchx-db", database_id = "staging_db_id" }
]

[build]
# Build command - does NOT reset database
# Database reset is available separately via: npm run db:reset
command = "npm run build:worker"

# Default environment variables (used when no --env is specified)
# These can be overridden by [env.production.vars] or [env.staging.vars]
[vars]
GERRIT_BASE_URL = "https://android-review.googlesource.com"
GERRIT_USERNAME = "your-gerrit-username"
GERRIT_PASSWORD = "your-gerrit-password-or-token"
MAX_FILE_SIZE = "10485760"
RATE_LIMIT_WINDOW = "900000"
RATE_LIMIT_MAX = "10"
ADMIN_USER_PASSWORD = "your_password_here"
TEST_USER_PASSWORD = "your_password_here"
VITE_PUBLIC_SITE_URL = "https://patchx.pages.dev"
RESEND_API_KEY = "your-resend-api-key"
RESEND_FROM_EMAIL = "support@supagraph.ai"
RESEND_FROM_NAME = "PatchX"
RESEND_REPLY_TO_EMAIL = "support@supagraph.ai"

MAILCHANNELS_FROM_EMAIL = "support@supagraph.ai"
MAILCHANNELS_FROM_NAME = "PatchX"
MAILCHANNELS_REPLY_TO_EMAIL = "support@supagraph.ai"
MAILCHANNELS_API_ENDPOINT = "https://api.mailchannels.net/tx/v1/send"
MAILCHANNELS_API_KEY = "your-api-key-here"
CACHE_VERSION = "v1"

# 环境变量配置
[env.production.vars]
GERRIT_BASE_URL = "https://android-review.googlesource.com"
GERRIT_USERNAME = "your-gerrit-username"
GERRIT_PASSWORD = "your-gerrit-password-or-token"
MAX_FILE_SIZE = "10485760"
RATE_LIMIT_WINDOW = "900000"
RATE_LIMIT_MAX = "10"
ADMIN_USER_PASSWORD = "your_password_here"
TEST_USER_PASSWORD = "your_password_here"
VITE_PUBLIC_SITE_URL = "https://patchx.pages.dev"
RESEND_API_KEY = "your-resend-api-key"
RESEND_FROM_EMAIL = "support@supagraph.ai"
RESEND_FROM_NAME = "PatchX"
RESEND_REPLY_TO_EMAIL = "support@supagraph.ai"

MAILCHANNELS_FROM_EMAIL = "support@supagraph.ai"
MAILCHANNELS_FROM_NAME = "PatchX"
MAILCHANNELS_REPLY_TO_EMAIL = "support@supagraph.ai"
MAILCHANNELS_API_ENDPOINT = "https://api.mailchannels.net/tx/v1/send"
MAILCHANNELS_API_KEY = "your-api-key-here"
CACHE_VERSION = "v1"

# AI提供商配置 - OpenAI
OPENAI_BASE_URL = "https://api.openai.com/v1"
OPENAI_MODEL = "gpt-4"
OPENAI_MAX_TOKENS = "2000"
OPENAI_TEMPERATURE = "0.1"

# AI提供商配置 - Anthropic
ANTHROPIC_BASE_URL = "https://api.anthropic.com/v1"
ANTHROPIC_MODEL = "claude-3-sonnet-20240229"
ANTHROPIC_MAX_TOKENS = "2000"
ANTHROPIC_TEMPERATURE = "0.1"

# 自定义AI提供商配置
CUSTOM_AI_BASE_URL = ""
CUSTOM_AI_MODEL = "gpt-3.5-turbo"
CUSTOM_AI_MAX_TOKENS = "2000"
CUSTOM_AI_TEMPERATURE = "0.1"

[env.staging.vars]
GERRIT_BASE_URL = "https://android-review.googlesource.com"
GERRIT_USERNAME = "your-gerrit-username"
GERRIT_PASSWORD = "your-gerrit-password-or-token"
MAX_FILE_SIZE = "10485760"
RATE_LIMIT_WINDOW = "900000"
RATE_LIMIT_MAX = "10"
ADMIN_USER_PASSWORD = "your_password_here"
TEST_USER_PASSWORD = "your_password_here"
VITE_PUBLIC_SITE_URL = "https://patchx.pages.dev"
RESEND_API_KEY = "your-resend-api-key"
RESEND_FROM_EMAIL = "support@supagraph.ai"
RESEND_FROM_NAME = "PatchX"
RESEND_REPLY_TO_EMAIL = "support@supagraph.ai"

MAILCHANNELS_FROM_EMAIL = "support@supagraph.ai"
MAILCHANNELS_FROM_NAME = "PatchX"
MAILCHANNELS_REPLY_TO_EMAIL = "support@supagraph.ai"
MAILCHANNELS_API_ENDPOINT = "https://api.mailchannels.net/tx/v1/send"
MAILCHANNELS_API_KEY = "your-api-key-here"
CACHE_VERSION = "v1"

# AI提供商配置 - OpenAI
OPENAI_BASE_URL = "https://api.openai.com/v1"
OPENAI_MODEL = "gpt-3.5-turbo"
OPENAI_MAX_TOKENS = "2000"
OPENAI_TEMPERATURE = "0.1"

# AI提供商配置 - Anthropic
ANTHROPIC_BASE_URL = "https://api.anthropic.com/v1"
ANTHROPIC_MODEL = "claude-3-haiku-20240307"
ANTHROPIC_MAX_TOKENS = "2000"
ANTHROPIC_TEMPERATURE = "0.1"

# 自定义AI提供商配置
CUSTOM_AI_BASE_URL = ""
CUSTOM_AI_MODEL = "gpt-3.5-turbo"
CUSTOM_AI_MAX_TOKENS = "2000"
CUSTOM_AI_TEMPERATURE = "0.1"
